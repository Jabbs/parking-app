<legend>List My Parking Spot</legend>
<%= form_for(@listing) do |f| %>
	<%= render 'shared/error_messages', object: f.object %>
<div class="row">
	<div class="custom-well">
		<h3 class="blue">Create Listing at <%= current_user.building.name %></h3>
		<hr>
		<div class="row">
			<div class="span2">
				<label>Spot: <span class="red">*</span></label>
			</div>
			<div>
		    <%= f.collection_select :spot_id, @spots, :id, :name, prompt: "--select--" %>
			</div>
		</div>
		<div class="row">
			<div class="span2">
				<label>Start Date: <span class="red">*</span></label>
			</div>
			<div>
				<%= f.date_select :start_date, order: [:month, :day, :year] %>
			</div>
		</div>
		<div class="row">
			<div class="span2">
				<label>Start Time: <span class="red">*</span></label>
			</div>
			<div>
				<%= f.select :start_time_slot, Listing::TIMES, prompt: "--select--"  %>
			</div>
		</div>
		<div class="row">
			<div class="span2">
				<label>End Date: <span class="red">*</span></label>
			</div>
			<div>
				 <%= f.date_select :end_date, order: [:month, :day, :year] %>
			</div>
		</div>
		<div class="row">
			<div class="span2">
				<label>End Time: <span class="red">*</span></label>
			</div>
			<div>
				<%= f.select :end_time_slot, Listing::TIMES, prompt: "--select--"  %>
			</div>
		</div>
		<div class="row">
			<div class="span2">
				<label>Hourly Price: <span class="red">*</span></label>
			</div>
			<div>
				$<%= f.text_field :price, class: "span1" %>
			</div>
		</div>
		<div class="row">
			<div class="span2">
				<%= f.submit 'Create Listing', class: "btn btn-custom btn-large" %>
			</div>
		</div>
	</div>
</div>
<% end %>

<legend>Current Listings</legend>
<table class="table table-striped table-condensed table-hover">
	<thead>
	  <tr>
	    <th>Building</th>
	    <th>Spot</th>
	    <th>Start</th>
	    <th>End</th>
	    <th>Price</th>
	  </tr>
	</thead>
	<tbody>
	<% @listings.each do |listing| %>
	  <tr>
			<td><%= listing.spot.building.name %></td>
			<td><%= listing.spot.name %></td>
			<td><%= listing.time_slot_start_hour %>, <%= listing.start_date.strftime("%b %e, %Y") %></td>
			<td><%= listing.time_slot_end_hour %>, <%= listing.end_date.strftime("%b %e, %Y") %></td>
			<td><%= number_to_currency(listing.price) %>/hour</td>
			<td><%= link_to 'remove', listing_path(listing), method: :delete, confirm: "Are you sure?" %></td>
		</tr>
	<% end %>
	</tbody>
</table>
